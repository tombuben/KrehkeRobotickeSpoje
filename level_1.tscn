[gd_scene load_steps=18 format=3 uid="uid://bengtiruay3eo"]

[ext_resource type="PackedScene" uid="uid://d2myyy2dlm4ti" path="res://pandulak.tscn" id="1_1j5ko"]
[ext_resource type="Script" path="res://Level.gd" id="1_cbap4"]
[ext_resource type="Script" path="res://KillBody.gd" id="2_nufue"]
[ext_resource type="Script" path="res://CameraCenterer.gd" id="2_r8wdn"]
[ext_resource type="Shader" path="res://old_movie.gdshader" id="3_fspt7"]
[ext_resource type="Script" path="res://Friction.gd" id="4_uuuov"]
[ext_resource type="PackedScene" uid="uid://fr2gabw8cqso" path="res://ona.tscn" id="5_qh2jo"]
[ext_resource type="Script" path="res://CameraSwitcher.gd" id="6_ahpbm"]
[ext_resource type="Texture2D" uid="uid://bmkvdjqy6w6c5" path="res://art/storyboard/park/park_uvod.jpg" id="7_m0xvp"]
[ext_resource type="Script" path="res://GoalTarget.gd" id="8_bgc1y"]
[ext_resource type="Texture2D" uid="uid://cni6sio1f8skg" path="res://art/carry_stuff/kosik.png" id="8_tc635"]
[ext_resource type="Script" path="res://storyboardCamera.gd" id="9_mx74c"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_fugcv"]
shader = ExtResource("3_fspt7")
shader_parameter/projector_power = 0.497
shader_parameter/vignette_param = 2.0

[sub_resource type="PhysicsMaterial" id="PhysicsMaterial_1c1xu"]
friction = 0.0

[sub_resource type="CircleShape2D" id="CircleShape2D_r7yqd"]
radius = 4.8092

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_jd27c"]
radius = 5.0
height = 54.0

[sub_resource type="RectangleShape2D" id="RectangleShape2D_iy1vu"]
size = Vector2(510, 398)

[node name="Level1" type="Node2D"]
script = ExtResource("1_cbap4")

[node name="StaticBody2D" type="StaticBody2D" parent="."]
position = Vector2(50, 212)
script = ExtResource("2_nufue")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="StaticBody2D"]
polygon = PackedVector2Array(138, 436, -508, 322, -621, -388, 66, -414, 89, 152, 319, 171, 441, 200, 465, 221, 503, 234, 535, 254, 565.057, 270, 1444, 270, 3324, 352, 3404, -512, 3423, 367, 3309, 620, 1408, 453)

[node name="Polygon2D" type="Polygon2D" parent="StaticBody2D"]
polygon = PackedVector2Array(138, 436, -508, 322, -621, -388, 66, -414, 89, 152, 319, 171, 441, 200, 465, 221, 503, 234, 535, 254, 565.057, 270, 1444, 270, 3324, 352, 3404, -512, 3423, 367, 3309, 620, 1408, 453)

[node name="sisoun" parent="." instance=ExtResource("1_1j5ko")]
position = Vector2(674, 440)

[node name="ona" parent="." instance=ExtResource("5_qh2jo")]
position = Vector2(816, 446)
player = 2

[node name="CameraCenterer" type="Node2D" parent="." node_paths=PackedStringArray("pos1", "pos2")]
position = Vector2(434, 168)
script = ExtResource("2_r8wdn")
pos1 = NodePath("../ona")
pos2 = NodePath("../sisoun")

[node name="CharactersCamera" type="Camera2D" parent="CameraCenterer"]
position_smoothing_enabled = true
position_smoothing_speed = 10.0

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="ColorRect" type="ColorRect" parent="CanvasLayer"]
material = SubResource("ShaderMaterial_fugcv")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="Krabice" type="RigidBody2D" parent="."]
position = Vector2(751, 283)
collision_layer = 7
collision_mask = 7
mass = 5.0
physics_material_override = SubResource("PhysicsMaterial_1c1xu")
center_of_mass_mode = 1
center_of_mass = Vector2(0, 20)
max_contacts_reported = 2
contact_monitor = true

[node name="Node2D" type="Node2D" parent="Krabice"]
script = ExtResource("4_uuuov")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Krabice"]
shape = SubResource("CircleShape2D_r7yqd")

[node name="Sprite2D" type="Sprite2D" parent="Krabice/CollisionShape2D"]
position = Vector2(2, 27)
scale = Vector2(0.2, 0.2)
texture = ExtResource("8_tc635")

[node name="CollisionShape2D2" type="CollisionShape2D" parent="Krabice"]
position = Vector2(3, 50)
rotation = 1.51844
shape = SubResource("CapsuleShape2D_jd27c")

[node name="CameraSwitcher" type="Node2D" parent="." node_paths=PackedStringArray("gameplayCamera", "storyboards")]
script = ExtResource("6_ahpbm")
gameplayCamera = NodePath("../CameraCenterer/CharactersCamera")
storyboards = [NodePath("../Storyboard/ParkUvod"), NodePath("../Storyboard/ParkUvod2"), NodePath("../Storyboard/ParkUvod3"), NodePath("../Storyboard/ParkUvod4"), NodePath("../Storyboard/ParkUvod5")]

[node name="StoryboardCamera" type="Camera2D" parent="CameraSwitcher"]
position = Vector2(-998, -1504)
zoom = Vector2(1.75, 1.75)
position_smoothing_enabled = true
position_smoothing_speed = 10.0
script = ExtResource("9_mx74c")

[node name="Storyboard" type="Node2D" parent="."]

[node name="ColorRect" type="ColorRect" parent="Storyboard"]
offset_left = -4123.0
offset_top = -4747.0
offset_right = -3323.0
offset_bottom = -747.0
color = Color(0, 0, 0, 1)

[node name="ParkUvod" type="Sprite2D" parent="Storyboard"]
position = Vector2(-3729, -4408)
texture = ExtResource("7_m0xvp")

[node name="ParkUvod2" type="Sprite2D" parent="Storyboard"]
position = Vector2(-3808, -3960)
texture = ExtResource("7_m0xvp")

[node name="ParkUvod3" type="Sprite2D" parent="Storyboard"]
position = Vector2(-3733, -3466)
texture = ExtResource("7_m0xvp")

[node name="ParkUvod4" type="Sprite2D" parent="Storyboard"]
position = Vector2(-3740, -2941)
texture = ExtResource("7_m0xvp")

[node name="ParkUvod5" type="Sprite2D" parent="Storyboard"]
position = Vector2(-3748, -2476)
texture = ExtResource("7_m0xvp")

[node name="GoalTarget" type="Area2D" parent="."]
position = Vector2(3202, 368)
script = ExtResource("8_bgc1y")

[node name="CollisionShape2D" type="CollisionShape2D" parent="GoalTarget"]
position = Vector2(-2, 66)
shape = SubResource("RectangleShape2D_iy1vu")

[connection signal="body_entered" from="Krabice" to="." method="_on_krabice_body_entered"]
[connection signal="body_entered" from="Krabice" to="Krabice/Node2D" method="_on_krabice_body_entered"]
[connection signal="body_exited" from="Krabice" to="Krabice/Node2D" method="_on_krabice_body_exited"]
[connection signal="body_entered" from="GoalTarget" to="." method="_on_goal_target_body_entered"]
